<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<!--table-->
<table id="table" aria-describedby="data">
  <tr>
    <th scope="col">第一列</th>
    <th scope="col">第二列</th>
    <th scope="col">第三列</th>
    <th scope="col">第四列</th>
    <th scope="col">第五列</th>
  </tr>
  <tr>
    <td>一行一列</td>
    <td>一行二列</td>
    <td>一行三列</td>
    <td>一行四列</td>
  </tr>
  <tr>
    <td>二行一列</td>
    <td>二行二列</td>
  </tr>
  <tr>
    <td>三行一列</td>
    <td>三行二列</td>
  </tr>
  <tr>
    <td>四行一列</td>
    <td>四行二列</td>
    <td>四行三列</td>
  </tr>
</table>
<button name="change" onclick="change1()">转换</button>
</body>
</html>
<script type="application/javascript">
  function change() {
    let tab = document.getElementById('table');
    let tds = [];
    //顺序取出所有的td
    [...tab.getElementsByTagName('tr')].forEach(tr => {
      tds.push(...tr.getElementsByTagName('td'))
    })
    //清空表格
    tab.removeChild(...tab.getElementsByTagName('tbody'));
    let a = parseInt((tds.length / 5) + ''), b = tds.length % 5;
    //a为行数 b为最后一行个数
    for (let i = 0; i < a; i++) {
      let tr = document.createElement('tr');
      for (let j = 0; j < 5; j++) {
        tr.appendChild(tds[5 * i + j]);
      }
      //循环拼接 一共a行
      tab.appendChild(tr);
    }
    //拼接最后一行 是多少个就是多少个
    let latest = document.createElement('tr');
    for (let j = 0; j < b; j++) {
      latest.appendChild(tds[5 * a + j]);
    }
    tab.appendChild(latest);
  }

  function change1() {
    let table = document.getElementById('table');
    let trs = table.getElementsByTagName('tr');
    let afterNumTds = (ele, num) => {
      let tds = [];
      while (ele && tds?.length < num) {
        let nextTr = ele = ele?.nextElementSibling;
        let nextTrTds = nextTr?.getElementsByTagName('td');
        if (nextTrTds?.length) {
          tds.push(...nextTrTds);
        }
      }
      return tds;
    };
    trs && [...trs].forEach(tr => {
      let tds = tr.getElementsByTagName('td')
      let empty = 5 - tds.length
      if (empty === 5) {
        tr.parentNode.removeChild(tr);
      } else if (empty > 0) {
        let nextTds = afterNumTds(tr, empty);
        if (nextTds && nextTds.length > 0) {
          for (let i = 0; i < empty; i++) {
            nextTds[i] ? tr.appendChild(nextTds[i]) : null;
          }
        }
      }
    })
  }
</script>